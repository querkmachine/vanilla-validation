var Validate=function(){"use strict";return class{constructor(e,t={}){e.noValidate||(this.settings=Object.assign({},{showInlineErrors:!0,showErrorSummary:!0,disableButtonsOnSubmit:!0,submitButtonSelector:'[type="submit"], [type="image"]',errorSummaryClass:"error-message-summary",inlineErrorClass:"error-message",inputsDeferToFieldsets:[],i18n:{valRequired:"This field is required.",valType:"Value doesn't match expected type.",valTypeColor:"Value should be a valid hexidecimal code (for example, #786999).",valTypeEmail:"Value should be a valid email address (for example, hello@example.com).",valTypeNumber:"Value should be a valid number.",valTypeTel:"Value should be a valid telephone number.",valTypeURL:"Value should be a valid web address, including the protocol (for example, https://example.com).",valPattern:"Value doesn't match expected format.",valMaxlength:"Value cannot be longer than {1} characters. Currently it's {2} characters.",valMinlength:"Value cannot be shorter than {1} characters. Currently it's {2} characters.",valMax:"Value must be {1} or less.",valMin:"Value must be {1} or more.",valStep:"Value must be a multiple of {1}."}},t),this.$form=e,this.$submitButtons=[...e.querySelectorAll(this.settings.submitButtonSelector)],this.clickedSubmitButton=null,this.errorList=[],this.create())}create(){this.$form.setAttribute("novalidate","novalidate"),this.$form.bindFormSubmit=this.onSubmit.bind(this),this.$form.bindSubmitClick=this.onClickSubmit.bind(this),this.$form.addEventListener("submit",this.$form.bindFormSubmit),this.$submitButtons.forEach((e=>{e.addEventListener("click",this.$form.bindSubmitClick)}))}destroy(){this.clearErrors(),this.$form.removeAttribute("novalidate"),this.$form.removeEventListener("submit",this.$form.bindFormSubmit),this.$submitButtons.forEach((e=>{e.removeEventListener("click",this.$form.bindSubmitClick)}))}onSubmit(e){e.preventDefault(),this.errorList=this.findErrors(),this.clickedSubmitButton.formNoValidate||0===this.errorList.length?this.submitForm():this.printErrors()}onClickSubmit(e){this.clickedSubmitButton=e.currentTarget}findErrors(){this.clearErrors();return[...this.$form.querySelectorAll("input, textarea, select")].forEach((e=>{e.validity.valid||this.errorList.push({$element:e,$fieldset:this.shouldInputDeferToFieldset(e)?e.closest("fieldset"):null,id:e.id,name:e.name,label:this.getInputLabel(e),errorMessage:this.getInputErrorMessage(e)})})),this.errorList}printErrors(){if(this.errorList.forEach((e=>{e.$element.setAttribute("aria-invalid","true")})),this.settings.showInlineErrors&&this.errorList.forEach((e=>{const t=e.$element.parentNode,i=`${e.id||e.name}-Error`,s=[e.$element.getAttribute("aria-describedby")||null,i];if(!document.getElementById(i)){const s=document.createElement("div");if(s.id=i,s.classList.add(this.settings.inlineErrorClass),s.innerText=e.errorMessage,e.$fieldset){const t=e.$fieldset.querySelector("legend").nextSibling;e.$fieldset.insertBefore(s,t)}else t.insertBefore(s,e.$element)}e.$element.setAttribute("aria-describedby",s.join(" "))})),this.settings.showErrorSummary){const e=[],t=document.createElement("div"),i=document.createElement("ul");t.setAttribute("role","alert"),t.setAttribute("tabindex",-1),t.classList.add(this.settings.errorSummaryClass),this.errorList.forEach((t=>{if(t.id&&!e.includes(t.id)){const s=document.createElement("li"),r=document.createElement("a");r.href=`#${t.id}`,r.innerText=`${t.label}: ${t.errorMessage}`,s.appendChild(r),i.appendChild(s),e.push(t.id)}})),t.appendChild(i),this.$form.prepend(t)}if(this.settings.showErrorSummary){const e=this.$form.querySelector(`.${this.settings.errorSummaryClass}`);e&&e.focus()}else{const e=this.$form.querySelectorAll("[aria-invalid]");e.length>0&&e[0].focus()}}clearErrors(){if(this.errorList.forEach((e=>{const t=e.$element;t.removeAttribute("aria-invalid");let i=t.getAttribute("aria-describedby");i=i.replace(`${e.id}-Error`,"").trim(),i.length?t.setAttribute("aria-describedby",i):t.removeAttribute("aria-describedby")})),this.settings.showInlineErrors){[...this.$form.getElementsByClassName(this.settings.inlineErrorClass)].forEach((e=>e.remove()))}if(this.settings.showErrorSummary){const e=this.$form.querySelector(`.${this.settings.errorSummaryClass}`);e&&e.remove()}this.errorList=[]}shouldInputDeferToFieldset(e){return"radio"===e.type||this.settings.inputsDeferToFieldsets.includes(e.id)}getInputLabel(e){if(this.shouldInputDeferToFieldset(e)){var t,i;const s=null===(t=e.closest("fieldset"))||void 0===t||null===(i=t.querySelector("legend"))||void 0===i?void 0:i.innerText;if(s)return s.trim()}return e.labels.length?e.labels[0].innerText.trim():(console.error("Form element doesn't have associated label.",e),"")}getInputErrorMessage(e){let t=e.validationMessage;if(e.validity.valueMissing)t=e.dataset.valRequired||this.settings.i18n.valRequired;else if(e.validity.typeMismatch)if(e.dataset.valType)t=this.formatErrorMessage(e.dataset.valType,e.type);else switch(e.type){case"color":t=this.settings.i18n.valTypeColor;break;case"date":t=this.settings.i18n.valTypeDate;break;case"email":t=this.settings.i18n.valTypeEmail;break;case"number":t=this.settings.i18n.valTypeNumber;break;case"tel":t=this.settings.i18n.valTypeTel;break;case"url":t=this.settings.i18n.valTypeURL;break;default:t=this.formatErrorMessage(this.settings.i18n.valType,e.type)}else e.validity.patternMismatch?t=this.formatErrorMessage(e.dataset.valPattern||this.settings.i18n.valPattern,e.attributes.pattern.value):e.validity.tooLong?t=this.formatErrorMessage(e.dataset.valMaxlength||this.settings.i18n.valMaxlength,e.attributes.maxlength.value,e.value.length):e.validity.tooShort?t=this.formatErrorMessage(e.dataset.valMinlength||this.settings.i18n.valMinlength,e.attributes.minlength.value,e.value.length):e.validity.rangeOverflow?t=this.formatErrorMessage(e.dataset.valMax||this.settings.i18n.valMax,e.attributes.max.value):e.validity.rangeUnderflow?t=this.formatErrorMessage(e.dataset.valMin||this.settings.i18n.valMin,e.attributes.min.value):e.validity.stepMismatch&&(t=this.formatErrorMessage(e.dataset.valStep||this.settings.i18n.valStep,e.attributes.step.value));return t}formatErrorMessage(e,...t){for(let i=0;i<t.length;i++)e=e.replace(`{${i+1}}`,t[i]);return e}submitForm(){if(this.settings.disableButtonsOnSubmit&&this.$submitButtons.forEach((e=>{e.disabled=!0,e.setAttribute("aria-busy","true")})),this.clickedSubmitButton&&this.clickedSubmitButton.name){const e=document.createElement("input");e.type="hidden",e.name=this.clickedSubmitButton.name,e.value=this.clickedSubmitButton.value,this.$form.appendChild(e)}this.$form.submit()}}}();
//# sourceMappingURL=validate.min.js.map
